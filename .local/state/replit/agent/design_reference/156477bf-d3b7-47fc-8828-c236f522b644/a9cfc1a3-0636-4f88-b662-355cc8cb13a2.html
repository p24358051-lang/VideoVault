<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Video Mini App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'telegram': '#0088cc',
                        'telegram-dark': '#0066aa',
                    }
                }
            }
        };
    </script>
</head>
<body class="font-inter bg-gray-50 min-h-screen">

    <!-- @COMPONENT: AuthScreen [mode: login/register] -->
    <div id="auth-screen" class="hidden min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-md">
            <!-- Login Form -->
            <div id="login-form" class="bg-white rounded-lg shadow-lg p-6">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-gradient-to-r from-telegram to-telegram-dark rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-video text-white text-2xl"></i>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900 mb-2">Welcome Back</h1>
                    <p class="text-gray-600">Sign in to access your videos</p>
                </div>
                
                <form class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input 
                            type="email" 
                            data-bind="auth.email"
                            placeholder="Enter your email"
                            class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-telegram focus:border-transparent outline-none transition-all"
                        />
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <div class="relative">
                            <input 
                                type="password" 
                                data-bind="auth.password"
                                placeholder="Enter your password"
                                class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-telegram focus:border-transparent outline-none transition-all pr-10"
                            />
                            <button type="button" class="absolute right-3 top-3 text-gray-400 hover:text-gray-600">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <button 
                        type="submit" 
                        data-event="click:handleLogin"
                        class="w-full bg-gradient-to-r from-telegram to-telegram-dark text-white py-3 rounded-lg font-medium hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200"
                    >
                        Sign In
                    </button>
                </form>
                
                <div class="mt-6 text-center">
                    <p class="text-gray-600">
                        Don't have an account? 
                        <button data-event="click:switchToRegister" class="text-telegram hover:underline font-medium">Sign up</button>
                    </p>
                </div>
            </div>
            
            <!-- Register Form -->
            <div id="register-form" class="hidden bg-white rounded-lg shadow-lg p-6">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-gradient-to-r from-telegram to-telegram-dark rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-user-plus text-white text-2xl"></i>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900 mb-2">Create Account</h1>
                    <p class="text-gray-600">Join us to access amazing videos</p>
                </div>
                
                <form class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input 
                            type="email" 
                            data-bind="register.email"
                            placeholder="Enter your email"
                            class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-telegram focus:border-transparent outline-none transition-all"
                        />
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input 
                            type="password" 
                            data-bind="register.password"
                            placeholder="Create a strong password"
                            class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-telegram focus:border-transparent outline-none transition-all"
                        />
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Confirm Password</label>
                        <input 
                            type="password" 
                            data-bind="register.confirmPassword"
                            placeholder="Confirm your password"
                            class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-telegram focus:border-transparent outline-none transition-all"
                        />
                    </div>
                    
                    <button 
                        type="submit" 
                        data-event="click:handleRegister"
                        class="w-full bg-gradient-to-r from-telegram to-telegram-dark text-white py-3 rounded-lg font-medium hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200"
                    >
                        Create Account
                    </button>
                </form>
                
                <div class="mt-6 text-center">
                    <p class="text-gray-600">
                        Already have an account? 
                        <button data-event="click:switchToLogin" class="text-telegram hover:underline font-medium">Sign in</button>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: AuthScreen -->

    <!-- @COMPONENT: UserDashboard [role: user] -->
    <div id="user-dashboard" class="min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-gradient-to-r from-telegram to-telegram-dark rounded-lg flex items-center justify-center">
                            <i class="fas fa-video text-white text-sm"></i>
                        </div>
                        <h1 class="ml-3 text-xl font-bold text-gray-900">Video Hub</h1>
                    </div>
                    
                    <div class="flex items-center space-x-3">
                        <!-- Profile Picture -->
                        <div class="relative">
                            <!-- A professional headshot of a person in business attire -->
                            <img 
                                src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=100&h=100" 
                                alt="User profile picture" 
                                data-bind="user.avatarUrl"
                                class="w-10 h-10 rounded-full border-2 border-gray-200 cursor-pointer hover:border-telegram transition-colors"
                                data-event="click:openProfileModal"
                            />
                            <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"></div>
                        </div>
                        
                        <button 
                            data-event="click:logout"
                            class="text-gray-400 hover:text-gray-600 transition-colors"
                        >
                            <i class="fas fa-sign-out-alt text-lg"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Welcome Section -->
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-2">Welcome back!</h2>
                <p class="text-gray-600">Discover and enjoy your video collection</p>
            </div>

            <!-- Search and Filters -->
            <div class="mb-6">
                <div class="flex flex-col sm:flex-row gap-4">
                    <div class="flex-1">
                        <div class="relative">
                            <input 
                                type="text" 
                                placeholder="Search videos..."
                                data-bind="search.query"
                                class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-telegram focus:border-transparent outline-none"
                            />
                            <i class="fas fa-search absolute left-3 top-3.5 text-gray-400"></i>
                        </div>
                    </div>
                    
                    <button class="px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center">
                        <i class="fas fa-filter mr-2"></i>
                        Filter
                    </button>
                </div>
            </div>

            <!-- Video Grid -->
            <!-- @MAP: videos.map(video => ( -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Video Card 1 -->
                <div class="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden">
                    <div class="relative">
                        <!-- A cinematic landscape with mountains and sunset -->
                        <img 
                            src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&h=225" 
                            alt="Video thumbnail" 
                            class="w-full h-48 object-cover"
                        />
                        <div class="absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all flex items-center justify-center">
                            <button 
                                data-event="click:playVideo"
                                data-video-id="1"
                                class="w-16 h-16 bg-telegram bg-opacity-90 rounded-full flex items-center justify-center text-white opacity-0 hover:opacity-100 transition-opacity transform hover:scale-110"
                            >
                                <i class="fas fa-play ml-1"></i>
                            </button>
                        </div>
                        <div class="absolute bottom-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded">
                            <span data-bind="video.duration">4:32</span>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <h3 class="font-semibold text-gray-900 mb-2 line-clamp-2" data-bind="video.title">Amazing Nature Documentary</h3>
                        <p class="text-sm text-gray-600 mb-4 line-clamp-2" data-bind="video.description">Explore the breathtaking beauty of natural landscapes and wildlife.</p>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex space-x-2">
                                <button 
                                    data-event="click:playVideo"
                                    data-implementation="Should open video player modal"
                                    class="flex items-center px-3 py-2 bg-telegram text-white text-sm rounded-lg hover:bg-telegram-dark transition-colors"
                                >
                                    <i class="fas fa-play mr-2"></i>
                                    Play
                                </button>
                                
                                <button 
                                    data-event="click:shareVideo"
                                    data-implementation="Should use Web Share API with Telegram fallback"
                                    class="flex items-center px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded-lg hover:bg-gray-200 transition-colors"
                                >
                                    <i class="fas fa-share mr-2"></i>
                                    Share
                                </button>
                            </div>
                            
                            <button 
                                data-event="click:downloadVideo"
                                data-implementation="Should check if download is enabled for this video"
                                class="text-gray-400 hover:text-telegram transition-colors"
                            >
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Video Card 2 -->
                <div class="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden">
                    <div class="relative">
                        <!-- A modern technology workspace with computers and gadgets -->
                        <img 
                            src="https://pixabay.com/get/g7d4eac4b89ebae81e1371feee86bdee0bb111266f3501be7ad4eaca4ce1fe15938ee7919d2857c7e4f3af9058fd79012d7e084b5124b7b2074b2d24b6760ef86_1280.jpg" 
                            alt="Video thumbnail" 
                            class="w-full h-48 object-cover"
                        />
                        <div class="absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all flex items-center justify-center">
                            <button 
                                data-event="click:playVideo"
                                data-video-id="2"
                                class="w-16 h-16 bg-telegram bg-opacity-90 rounded-full flex items-center justify-center text-white opacity-0 hover:opacity-100 transition-opacity transform hover:scale-110"
                            >
                                <i class="fas fa-play ml-1"></i>
                            </button>
                        </div>
                        <div class="absolute bottom-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded">
                            <span data-bind="video.duration">8:15</span>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <h3 class="font-semibold text-gray-900 mb-2 line-clamp-2" data-bind="video.title">Tech Innovation Tutorial</h3>
                        <p class="text-sm text-gray-600 mb-4 line-clamp-2" data-bind="video.description">Learn about cutting-edge technology and innovation trends.</p>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex space-x-2">
                                <button 
                                    data-event="click:playVideo"
                                    class="flex items-center px-3 py-2 bg-telegram text-white text-sm rounded-lg hover:bg-telegram-dark transition-colors"
                                >
                                    <i class="fas fa-play mr-2"></i>
                                    Play
                                </button>
                                
                                <button 
                                    data-event="click:shareVideo"
                                    class="flex items-center px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded-lg hover:bg-gray-200 transition-colors"
                                >
                                    <i class="fas fa-share mr-2"></i>
                                    Share
                                </button>
                            </div>
                            
                            <button 
                                data-event="click:downloadVideo"
                                class="text-gray-400 hover:text-telegram transition-colors"
                            >
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Video Card 3 -->
                <div class="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden">
                    <div class="relative">
                        <!-- A culinary scene with delicious food and cooking -->
                        <img 
                            src="https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&h=225" 
                            alt="Video thumbnail" 
                            class="w-full h-48 object-cover"
                        />
                        <div class="absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all flex items-center justify-center">
                            <button 
                                data-event="click:playVideo"
                                data-video-id="3"
                                class="w-16 h-16 bg-telegram bg-opacity-90 rounded-full flex items-center justify-center text-white opacity-0 hover:opacity-100 transition-opacity transform hover:scale-110"
                            >
                                <i class="fas fa-play ml-1"></i>
                            </button>
                        </div>
                        <div class="absolute bottom-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded">
                            <span data-bind="video.duration">12:08</span>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <h3 class="font-semibold text-gray-900 mb-2 line-clamp-2" data-bind="video.title">Cooking Masterclass</h3>
                        <p class="text-sm text-gray-600 mb-4 line-clamp-2" data-bind="video.description">Master the art of culinary excellence with professional techniques.</p>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex space-x-2">
                                <button 
                                    data-event="click:playVideo"
                                    class="flex items-center px-3 py-2 bg-telegram text-white text-sm rounded-lg hover:bg-telegram-dark transition-colors"
                                >
                                    <i class="fas fa-play mr-2"></i>
                                    Play
                                </button>
                                
                                <button 
                                    data-event="click:shareVideo"
                                    class="flex items-center px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded-lg hover:bg-gray-200 transition-colors"
                                >
                                    <i class="fas fa-share mr-2"></i>
                                    Share
                                </button>
                            </div>
                            
                            <button 
                                data-event="click:downloadVideo"
                                class="text-gray-300 cursor-not-allowed"
                                disabled
                                title="Download not available"
                            >
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Video Card 4 -->
                <div class="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden">
                    <div class="relative">
                        <!-- A creative arts and design workspace with colorful materials -->
                        <img 
                            src="https://images.unsplash.com/photo-1541961017774-22349e4a1262?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&h=225" 
                            alt="Video thumbnail" 
                            class="w-full h-48 object-cover"
                        />
                        <div class="absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all flex items-center justify-center">
                            <button 
                                data-event="click:playVideo"
                                data-video-id="4"
                                class="w-16 h-16 bg-telegram bg-opacity-90 rounded-full flex items-center justify-center text-white opacity-0 hover:opacity-100 transition-opacity transform hover:scale-110"
                            >
                                <i class="fas fa-play ml-1"></i>
                            </button>
                        </div>
                        <div class="absolute bottom-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded">
                            <span data-bind="video.duration">6:47</span>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <h3 class="font-semibold text-gray-900 mb-2 line-clamp-2" data-bind="video.title">Creative Design Workshop</h3>
                        <p class="text-sm text-gray-600 mb-4 line-clamp-2" data-bind="video.description">Unleash your creativity with professional design techniques and tools.</p>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex space-x-2">
                                <button 
                                    data-event="click:playVideo"
                                    class="flex items-center px-3 py-2 bg-telegram text-white text-sm rounded-lg hover:bg-telegram-dark transition-colors"
                                >
                                    <i class="fas fa-play mr-2"></i>
                                    Play
                                </button>
                                
                                <button 
                                    data-event="click:shareVideo"
                                    class="flex items-center px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded-lg hover:bg-gray-200 transition-colors"
                                >
                                    <i class="fas fa-share mr-2"></i>
                                    Share
                                </button>
                            </div>
                            
                            <button 
                                data-event="click:downloadVideo"
                                class="text-gray-400 hover:text-telegram transition-colors"
                            >
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_MAP )) -->

            <!-- Load More Button -->
            <div class="text-center mt-8">
                <button 
                    data-event="click:loadMoreVideos"
                    class="px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"
                >
                    Load More Videos
                </button>
            </div>
        </main>
    </div>
    <!-- @END_COMPONENT: UserDashboard -->

    <!-- @COMPONENT: AdminPanel [role: admin] -->
    <div id="admin-panel" class="hidden min-h-screen">
        <!-- Admin Header -->
        <header class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-gradient-to-r from-red-500 to-red-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-shield-alt text-white text-sm"></i>
                        </div>
                        <h1 class="ml-3 text-xl font-bold text-gray-900">Admin Panel</h1>
                    </div>
                    
                    <div class="flex items-center space-x-3">
                        <button 
                            data-event="click:addVideo"
                            class="px-4 py-2 bg-telegram text-white rounded-lg hover:bg-telegram-dark transition-colors"
                        >
                            <i class="fas fa-plus mr-2"></i>
                            Add Video
                        </button>
                        
                        <button 
                            data-event="click:logout"
                            class="text-gray-400 hover:text-gray-600 transition-colors"
                        >
                            <i class="fas fa-sign-out-alt text-lg"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Admin Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-video text-blue-600 text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Total Videos</p>
                            <p class="text-2xl font-bold text-gray-900" data-bind="stats.totalVideos">42</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-users text-green-600 text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Total Users</p>
                            <p class="text-2xl font-bold text-gray-900" data-bind="stats.totalUsers">1,249</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-eye text-purple-600 text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Total Views</p>
                            <p class="text-2xl font-bold text-gray-900" data-bind="stats.totalViews">15.2k</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Video Management Table -->
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-lg font-semibold text-gray-900">Video Management</h2>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Video</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Permissions</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Stats</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <!-- @MAP: adminVideos.map(video => ( -->
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-16 w-24">
                                            <!-- A professional video production setup with cameras and lighting -->
                                            <img 
                                                src="https://images.unsplash.com/photo-1492619375914-88005aa9e8fb?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=96&h=64" 
                                                alt="Video thumbnail" 
                                                class="h-16 w-24 rounded-lg object-cover"
                                            />
                                        </div>
                                        <div class="ml-4">
                                            <div class="text-sm font-medium text-gray-900" data-bind="video.title">Amazing Nature Documentary</div>
                                            <div class="text-sm text-gray-500" data-bind="video.duration">4:32</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex space-x-2">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            <i class="fas fa-play mr-1"></i>
                                            Play
                                        </span>
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            <i class="fas fa-share mr-1"></i>
                                            Share
                                        </span>
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                            <i class="fas fa-download mr-1"></i>
                                            Download
                                        </span>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                    <div data-bind="video.views">1.2k views</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                    <button 
                                        data-event="click:editVideo"
                                        class="text-telegram hover:text-telegram-dark mr-3"
                                    >
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button 
                                        data-event="click:deleteVideo"
                                        class="text-red-600 hover:text-red-900"
                                    >
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-16 w-24">
                                            <!-- A technology conference with speakers and audience -->
                                            <img 
                                                src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=96&h=64" 
                                                alt="Video thumbnail" 
                                                class="h-16 w-24 rounded-lg object-cover"
                                            />
                                        </div>
                                        <div class="ml-4">
                                            <div class="text-sm font-medium text-gray-900" data-bind="video.title">Tech Innovation Tutorial</div>
                                            <div class="text-sm text-gray-500" data-bind="video.duration">8:15</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex space-x-2">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            <i class="fas fa-play mr-1"></i>
                                            Play
                                        </span>
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            <i class="fas fa-share mr-1"></i>
                                            Share
                                        </span>
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                            <i class="fas fa-times mr-1"></i>
                                            No Download
                                        </span>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                    <div data-bind="video.views">856 views</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                    <button 
                                        data-event="click:editVideo"
                                        class="text-telegram hover:text-telegram-dark mr-3"
                                    >
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button 
                                        data-event="click:deleteVideo"
                                        class="text-red-600 hover:text-red-900"
                                    >
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <!-- @END_MAP )) -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>
    <!-- @END_COMPONENT: AdminPanel -->

    <!-- @COMPONENT: VideoPlayerModal [video: object] -->
    <div id="video-player-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden">
            <div class="flex items-center justify-between p-4 border-b">
                <h3 class="text-lg font-semibold text-gray-900" data-bind="currentVideo.title">Video Title</h3>
                <button 
                    data-event="click:closeVideoPlayer"
                    class="text-gray-400 hover:text-gray-600 transition-colors"
                >
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="relative">
                <!-- @FUNCTIONALITY: This video player should implement HTML5 video with custom controls -->
                <video 
                    id="main-video-player"
                    class="w-full h-auto max-h-[60vh]" 
                    controls 
                    data-bind="currentVideo.sourceUrl"
                    data-implementation="Replace src with actual video URL"
                >
                    <source src="#" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            
            <div class="p-4">
                <div class="flex items-center justify-between">
                    <div class="flex space-x-3">
                        <button 
                            data-event="click:shareVideo"
                            class="flex items-center px-4 py-2 bg-telegram text-white rounded-lg hover:bg-telegram-dark transition-colors"
                        >
                            <i class="fas fa-share mr-2"></i>
                            Share
                        </button>
                        
                        <button 
                            data-event="click:downloadVideo"
                            data-implementation="Should check download permissions"
                            class="flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"
                        >
                            <i class="fas fa-download mr-2"></i>
                            Download
                        </button>
                    </div>
                    
                    <div class="text-sm text-gray-600">
                        <span data-bind="currentVideo.views">1.2k views</span>
                    </div>
                </div>
                
                <div class="mt-4">
                    <p class="text-gray-700" data-bind="currentVideo.description">Video description will appear here...</p>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: VideoPlayerModal -->

    <!-- @COMPONENT: ProfileModal [user: object] -->
    <div id="profile-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg max-w-md w-full">
            <div class="flex items-center justify-between p-4 border-b">
                <h3 class="text-lg font-semibold text-gray-900">Profile Settings</h3>
                <button 
                    data-event="click:closeProfileModal"
                    class="text-gray-400 hover:text-gray-600 transition-colors"
                >
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="p-6">
                <div class="text-center mb-6">
                    <div class="relative inline-block">
                        <!-- A professional headshot of a person in business attire -->
                        <img 
                            src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=128&h=128" 
                            alt="Profile picture" 
                            data-bind="user.avatarUrl"
                            class="w-24 h-24 rounded-full border-4 border-gray-200"
                        />
                        <button 
                            data-event="click:changeProfilePicture"
                            class="absolute bottom-0 right-0 w-8 h-8 bg-telegram text-white rounded-full flex items-center justify-center hover:bg-telegram-dark transition-colors"
                        >
                            <i class="fas fa-camera text-sm"></i>
                        </button>
                    </div>
                </div>
                
                <form class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input 
                            type="email" 
                            data-bind="user.email"
                            value="user@example.com"
                            disabled
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"
                        />
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                        <input 
                            type="text" 
                            data-bind="user.role"
                            value="USER"
                            disabled
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"
                        />
                    </div>
                </form>
                
                <div class="mt-6 flex space-x-3">
                    <button 
                        data-event="click:saveProfile"
                        class="flex-1 bg-telegram text-white py-2 rounded-lg hover:bg-telegram-dark transition-colors"
                    >
                        Save Changes
                    </button>
                    <button 
                        data-event="click:closeProfileModal"
                        class="flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200 transition-colors"
                    >
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: ProfileModal -->

    <!-- @COMPONENT: AddVideoModal [admin only] -->
    <div id="add-video-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between p-4 border-b">
                <h3 class="text-lg font-semibold text-gray-900">Add New Video</h3>
                <button 
                    data-event="click:closeAddVideoModal"
                    class="text-gray-400 hover:text-gray-600 transition-colors"
                >
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <form class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Video Title</label>
                    <input 
                        type="text" 
                        data-bind="newVideo.title"
                        placeholder="Enter video title"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-telegram focus:border-transparent outline-none"
                    />
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Video URL</label>
                    <input 
                        type="url" 
                        data-bind="newVideo.sourceUrl"
                        placeholder="https://example.com/video.mp4"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-telegram focus:border-transparent outline-none"
                    />
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                    <textarea 
                        data-bind="newVideo.description"
                        placeholder="Enter video description"
                        rows="3"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-telegram focus:border-transparent outline-none resize-none"
                    ></textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-3">Permissions</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input 
                                type="checkbox" 
                                data-bind="newVideo.canPlay"
                                checked
                                class="w-4 h-4 text-telegram focus:ring-telegram border-gray-300 rounded"
                            />
                            <span class="ml-2 text-sm text-gray-700">Allow Play</span>
                        </label>
                        
                        <label class="flex items-center">
                            <input 
                                type="checkbox" 
                                data-bind="newVideo.canShare"
                                checked
                                class="w-4 h-4 text-telegram focus:ring-telegram border-gray-300 rounded"
                            />
                            <span class="ml-2 text-sm text-gray-700">Allow Share</span>
                        </label>
                        
                        <label class="flex items-center">
                            <input 
                                type="checkbox" 
                                data-bind="newVideo.canDownload"
                                class="w-4 h-4 text-telegram focus:ring-telegram border-gray-300 rounded"
                            />
                            <span class="ml-2 text-sm text-gray-700">Allow Download</span>
                        </label>
                    </div>
                </div>
                
                <div class="flex space-x-3 pt-4">
                    <button 
                        type="submit"
                        data-event="click:saveVideo"
                        class="flex-1 bg-telegram text-white py-2 rounded-lg hover:bg-telegram-dark transition-colors"
                    >
                        Add Video
                    </button>
                    <button 
                        type="button"
                        data-event="click:closeAddVideoModal"
                        class="flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200 transition-colors"
                    >
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- @END_COMPONENT: AddVideoModal -->

    <!-- Loading Spinner -->
    <div id="loading-spinner" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 flex items-center space-x-3">
            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-telegram"></div>
            <span class="text-gray-700">Loading...</span>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2">
        <!-- Toast messages will be dynamically inserted here -->
    </div>

    <script>
        (function() {
            // @STATE: currentUser:object = null
            // @STATE: currentView:string = 'auth'
            // @STATE: videos:array = []
            // @STATE: currentVideo:object = null
            
            // Mock data for demonstration
            const mockVideos = [
                {
                    id: 1,
                    title: "Amazing Nature Documentary",
                    description: "Explore the breathtaking beauty of natural landscapes and wildlife.",
                    duration: "4:32",
                    views: "1.2k",
                    canPlay: true,
                    canShare: true,
                    canDownload: true
                },
                {
                    id: 2,
                    title: "Tech Innovation Tutorial",
                    description: "Learn about cutting-edge technology and innovation trends.",
                    duration: "8:15",
                    views: "856",
                    canPlay: true,
                    canShare: true,
                    canDownload: false
                },
                {
                    id: 3,
                    title: "Cooking Masterclass",
                    description: "Master the art of culinary excellence with professional techniques.",
                    duration: "12:08",
                    views: "2.1k",
                    canPlay: true,
                    canShare: true,
                    canDownload: false
                },
                {
                    id: 4,
                    title: "Creative Design Workshop",
                    description: "Unleash your creativity with professional design techniques and tools.",
                    duration: "6:47",
                    views: "645",
                    canPlay: true,
                    canShare: true,
                    canDownload: true
                }
            ];

            // Initialize Telegram WebApp
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.ready();
                window.Telegram.WebApp.expand();
            }

            // View management
            function showView(viewId) {
                const views = ['auth-screen', 'user-dashboard', 'admin-panel'];
                views.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.classList.toggle('hidden', id !== viewId);
                    }
                });
            }

            // Modal management
            function showModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('hidden');
                }
            }

            function hideModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('hidden');
                }
            }

            // Event handlers - TODO: Implement actual functionality
            function handleLogin(event) {
                event.preventDefault();
                // TODO: Implement login logic with Argon2 password verification
                showView('user-dashboard');
            }

            function handleRegister(event) {
                event.preventDefault();
                // TODO: Implement registration logic with Argon2 password hashing
                showView('user-dashboard');
            }

            function handlePlayVideo(videoId) {
                // TODO: Load actual video URL and open player modal
                showModal('video-player-modal');
            }

            function handleShareVideo(video) {
                // TODO: Implement Web Share API with Telegram deep link fallback
                if (navigator.share) {
                    navigator.share({
                        title: video.title,
                        text: video.description,
                        url: window.location.href
                    });
                } else {
                    // Fallback to Telegram deep link
                    const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(video.title)}`;
                    window.open(telegramUrl, '_blank');
                }
            }

            function handleDownloadVideo(video) {
                // TODO: Implement download proxy through /api/videos/:id/download
                if (video.canDownload) {
                    console.log('Downloading video:', video.title);
                } else {
                    showToast('Download not available for this video', 'warning');
                }
            }

            function showToast(message, type = 'info') {
                // TODO: Implement toast notification system
                console.log(`Toast (${type}):`, message);
            }

            // Initialize the app
            function init() {
                // Start with auth screen
                showView('auth-screen');
                
                // TODO: Check for existing authentication
                // TODO: Initialize Telegram WebApp SDK
                // TODO: Set up API endpoints
            }

            // Start the application
            document.addEventListener('DOMContentLoaded', init);

            // Expose functions for inline event handlers
            window.app = {
                handleLogin,
                handleRegister,
                handlePlayVideo,
                handleShareVideo,
                handleDownloadVideo,
                showView,
                showModal,
                hideModal
            };
        })();
    </script>

</body>
</html>